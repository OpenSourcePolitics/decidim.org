<% @testimonial = data.testimonials %>

<script>
  var testimonials = [
  <% data.testimonials.each do |f| %>
    {
      name: "<%= f.name %>",
      image: "<%= f.image %>",
      org: "<%= t("testimonials.#{f.id}.org")%>",
      quote: "<%= t("testimonials.#{f.id}.quote")%>"
    },
  <% end %>
  ]

  var testimonialsRandom = testimonials.sort(function() {
    return 0.5 - Math.random();
  });
  var testimonialBlocks = document.querySelectorAll(".testimonials");

  testimonialBlocks.forEach(function(element, index) {
    var currentT = testimonialsRandom[index];
    element.querySelector(".testimonials__img img").setAttribute("src", currentT.image);
    element.querySelector(".testimonials__img img").setAttribute("alt", currentT.name);
    element.querySelector(".testimonials__author").textContent = currentT.name;
    element.querySelector(".testimonials__org").textContent = currentT.org;
    element.querySelector(".testimonials__quote").textContent = currentT.quote;
  });
</script>
